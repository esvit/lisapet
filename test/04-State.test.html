<html>
<body>
<script type="module">
  import { expect } from "@open-wc/testing";
  import { runTests } from "@web/test-runner-mocha";
  import State from '../src/State.js';

  class GameState extends State {
    get state() {
      return {
        test: 1
      };
    }

    get mutations() {
      return {
        changeTest: ({ state }, val) => state.test = val
      };
    }

    loadState({ changeTest }, val) {
      changeTest(val);
    }
  }

  runTests(async () => {
    describe('State', () => {
      it('should state, mutations and action work', () => {
        const gameState = new GameState();

        expect(gameState.test).to.equal(1);
        gameState.test = 2;
        expect(gameState.test).to.equal(2);
        gameState.changeTest(3);
        expect(gameState.test).to.equal(3);
        gameState.loadState(4);
        expect(gameState.test).to.equal(4);
      });
    });
  });
</script>
</body>
</html>

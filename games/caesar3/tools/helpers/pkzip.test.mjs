import { PKZipStream } from './pkzip.mjs';

describe('PKZipStream', () => {
  test('test inflate', () => {
    const data = atob('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');
    let stream = new PKZipStream(data.split('').map((c) => c.charCodeAt(0)));
    expect(stream.inflate().length).toBe(52488);
  });
});
